window.autosave=function(){},function(a,b){function c(){function c(b){var c,d,e,f=(new Date).getTime(),g=[],h="undefined"!=typeof tinymce&&tinymce.get("content");return h&&!h.isHidden()&&f-3e3>l&&(h.save(),l=f),e={post_id:a("#post_ID").val()||0,post_type:a("#post_type").val()||"",post_author:a("#post_author").val()||"",post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""},"local"===b?e:(a('input[id^="in-category-"]:checked').each(function(){g.push(this.value)}),e.catslist=g.join(","),(c=a("#post_name").val())&&(e.post_name=c),(d=a("#parent_id").val())&&(e.parent_id=d),a("#comment_status").prop("checked")&&(e.comment_status="open"),a("#ping_status").prop("checked")&&(e.ping_status="open"),"1"===a("#auto_draft").val()&&(e.auto_draft="1"),e)}function d(b){return"object"==typeof b?(b.post_title||"")+"::"+(b.content||"")+"::"+(b.excerpt||""):(a("#title").val()||"")+"::"+(a("#content").val()||"")+"::"+(a("#excerpt").val()||"")}function e(){n.trigger("autosave-disable-buttons"),setTimeout(f,5e3)}function f(){n.trigger("autosave-enable-buttons")}function g(){m=!0}function h(){m=!1}function i(){function e(){var a=Math.random().toString(),c=!1;try{b.sessionStorage.setItem("wp-test",a),c=b.sessionStorage.getItem("wp-test")===a,b.sessionStorage.removeItem("wp-test")}catch(d){}return v=c,c}function f(){var a=!1;return v&&t&&(a=sessionStorage.getItem("wp-autosave-"+t),a=a?JSON.parse(a):{}),a}function g(a){var b;return v&&t?(b="wp-autosave-"+t,sessionStorage.setItem(b,JSON.stringify(a)),null!==sessionStorage.getItem(b)):!1}function h(){var a=f();return a&&u?a["post_"+u]||!1:!1}function i(a){var b=f();if(!b||!u)return!1;if(a)b["post_"+u]=a;else{if(!b.hasOwnProperty("post_"+u))return!1;delete b["post_"+u]}return g(b)}function j(b){var e,f,g=!1;return m?!1:(b?(e=h()||{},a.extend(e,b)):e=c("local"),f=d(e),"undefined"==typeof x&&(x=k),f===x?!1:(e.save_time=(new Date).getTime(),e.status=a("#post_status").val()||"",g=i(e),g&&(x=f),g))}function l(){u=a("#post_ID").val()||0,a("#wp-content-wrap").hasClass("tmce-active")?n.on("tinymce-editor-init.autosave",function(){b.setTimeout(function(){p()},1500)}):p(),w=b.setInterval(j,15e3),a("form#post").on("submit.autosave-local",function(){var b="undefined"!=typeof tinymce&&tinymce.get("content"),c=a("#post_ID").val()||0;b&&!b.isHidden()?b.on("submit",function(){j({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""})}):j({post_title:a("#title").val()||"",content:a("#content").val()||"",excerpt:a("#excerpt").val()||""}),wpCookies.set("wp-saving-post-"+c,"check")})}function o(a,b){function c(a){return a.toString().replace(/[\x20\t\r\n\f]+/g,"")}return c(a||"")===c(b||"")}function p(){var b,c,d,e,f=h(),g=wpCookies.get("wp-saving-post-"+u);if(f)return g&&(wpCookies.remove("wp-saving-post-"+u),"saved"===g)?(i(!1),void 0):(a("#has-newer-autosave").length||(b=a("#content").val()||"",c=a("#title").val()||"",d=a("#excerpt").val()||"","check"!==g&&o(b,f.content)&&o(c,f.post_title)&&o(d,f.excerpt)||(r=f,s={content:b,post_title:c,excerpt:d},e=a("#local-storage-notice"),a(".wrap h2").first().after(e.addClass("updated").show()),e.on("click.autosae-local",function(b){var c=a(b.target);c.hasClass("restore-backup")?(q(r),c.parent().hide(),a(this).find("p.undo-restore").show()):c.hasClass("undo-restore-backup")&&(q(s),c.parent().hide(),a(this).find("p.local-restore").show()),b.preventDefault()}))),void 0)}function q(b){var c;return b?(x=d(b),a("#title").val()!==b.post_title&&a("#title").focus().val(b.post_title||""),a("#excerpt").val(b.excerpt||""),c="undefined"!=typeof tinymce&&tinymce.get("content"),c&&!c.isHidden()&&"undefined"!=typeof switchEditors?(c.undoManager.add(),c.setContent(b.content?switchEditors.wpautop(b.content):"")):(a("#content-html").click(),a("#content").val(b.content)),!0):!1}var r,s,t,u,v,w,x;return t="undefined"!=typeof b.autosaveL10n&&b.autosaveL10n.blog_id,e()&&t&&(a("#content").length||a("#excerpt").length)?(n.ready(l),{hasStorage:v,getSavedPostData:h,save:j}):void 0}function j(){function g(){r=!0,b.clearTimeout(s),s=b.setTimeout(function(){r=!1},1e4)}function h(b){p(),r=!1,u=t,t="",n.trigger("after-autosave",[b]),a(".autosave-message").text(b.message),f(),b.success&&a("#auto_draft").val("")}function i(){q=!0}function j(){v=0,wp.heartbeat.connectNow()}function l(){return d()!==k}function o(){var b,f;return m||q||r?!1:(new Date).getTime()<v?!1:(b=c(),f=d(b),"undefined"==typeof u&&(u=k),f===u?!1:(t=f,g(),e(),n.trigger("wpcountwords",[b.content]).trigger("before-autosave",[b]),a(".autosave-message").text(autosaveL10n.savingText),b._wpnonce=a("#_wpnonce").val()||"",b))}function p(){v=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var q,r,s,t,u,v=0;return n.on("heartbeat-send.autosave",function(a,b){var c=o();c&&(b.wp_autosave=c)}).on("heartbeat-tick.autosave",function(a,b){b.wp_autosave&&h(b.wp_autosave)}).on("heartbeat-connection-lost.autosave",function(b,c,d){if("timeout"===c||603===d){var f=a("#lost-connection-notice");wp.autosave.local.hasStorage||f.find(".hide-if-no-sessionstorage").hide(),f.show(),e()}}).on("heartbeat-connection-restored.autosave",function(){a("#lost-connection-notice").hide(),f()}).ready(function(){p()}),{disable:i,tempBlockSave:g,triggerSave:j,postChanged:l}}var k,l=0,m=!1,n=a(document);return n.on("tinymce-editor-init.autosave",function(a,c){"content"===c.id&&b.setTimeout(function(){c.save(),k=d()},1e3)}).ready(function(){k=d()}),{getPostData:c,getCompareString:d,disableButtons:e,enableButtons:f,suspend:g,resume:h,local:i(),server:j()}}b.wp=b.wp||{},b.wp.autosave=c()}(jQuery,window);