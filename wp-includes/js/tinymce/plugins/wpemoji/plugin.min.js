!function(a,b){a.PluginManager.add("wpemoji",function(c,d){var e;isMacWebKit=a.Env.mac&&a.Env.webkit,b.emoji.parseEmoji&&(c.on("init",function(){var a=c.dom.uniqueId(),b=c.dom.create("link",{id:a,rel:"stylesheet",href:d+"/css/editor.css"});c.getDoc().getElementsByTagName("head")[0].appendChild(b)}),c.on("keydown keyup",function(a){e="keydown"===a.type}),c.on("input setcontent",function(d){var f,g,h,i;e&&"input"===d.type||(f=c.selection,g=f.getNode(),isMacWebKit&&(h=f.getBookmark()),b.emoji.parse(g),i=c.dom.select("img.emoji",g),a.each(i,function(a){a.getAttribute("data-wp-emoji")||(a.setAttribute("data-mce-resize","false"),a.setAttribute("data-mce-placeholder","1"),a.setAttribute("data-wp-emoji",a.alt))}),a.Env.ie&&g&&"BODY"===g.nodeName&&f.collapse(!0),isMacWebKit&&f.moveToBookmark(h))}),c.on("postprocess",function(a){a.content&&(a.content=a.content.replace(/<img[^>]+data-wp-emoji="([^"]+)"[^>]*>/g,function(a,b){return b}))}),c.on("resolvename",function(a){"IMG"===a.target.nodeName&&c.dom.getAttrib(a.target,"data-wp-emoji")&&a.preventDefault()}))})}(window.tinymce,window.wp);